# docker-compose.whatsapp.yml

services:
  whatsapp:
    build:
      context: ./
      dockerfile: Dockerfile
    container_name: amagisa-whatsapp
    command: >
      sh -c "node index.js"
    deploy:
      resources:
        limits:
          memory: 600M
    environment:
      # Variables que Puppeteer usar√° para headless y shm
      PUPPETEER_HEADLESS: "true"
      PUPPETEER_DISABLE_DEV_SHM: "true"
    networks:
      - amagisa_net
    volumes:
      - /mnt/datos_hdd/whatsapp_data:/app/data  # <-- montamos HDD
    restart: unless-stopped

networks:
  amagisa_net:
    external: true
